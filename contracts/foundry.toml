[profile.default]
src = "src"
out = "out"
libs = ["lib"]
test = "test"
solc = "0.8.28"
evm_version = "cancun"  # Enable transient storage (EIP-1153)

# Optimizer settings
optimizer = true
optimizer_runs = 200000
via_ir = true  # Required for complex contracts with many local variables
code_size_limit = 50000

# Test settings
fuzz.runs = 256
fuzz.max_test_rejects = 65536
invariant.runs = 64
invariant.depth = 15
invariant.fail_on_revert = false

[rpc_endpoints]
local = "http://localhost:8545"
sepolia = "${SEPOLIA_RPC_URL}"

[etherscan]
sepolia = { key = "${ETHERSCAN_API_KEY}" }

# CI profile (faster, fewer runs)
[profile.ci]
fuzz.runs = 64
invariant.runs = 16

# Deep testing profile (more thorough)
[profile.deep]
fuzz.runs = 1024
invariant.runs = 256
invariant.depth = 50
